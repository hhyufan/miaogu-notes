# 喵咕笔记平台 - 项目架构设计

## 项目概述

将现有的喵咕网页改造为一个基于 **SpringBoot + Vue + MyBatis** 的在线笔记记录平台，支持 Markdown 笔记管理、mgtree 文件支持、用户社交、AI 集成等功能。

## 技术栈

### 后端技术栈
- **框架**: Spring Boot 2.7+
- **数据库**: MySQL 8.0+
- **ORM**: MyBatis Plus
- **缓存**: Redis
- **安全**: Spring Security + JWT
- **文件存储**: 本地存储 / 华为云主机
- **AI API**: Spring AI

### 前端技术栈
- **框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **UI框架**: Element Plus / Ant Design Vue
- **状态管理**: Vuex
- **HTTP客户端**: Axios
- **Markdown编辑器**: marked.js

### AI集成
- **支持的AI提供商**: OpenAI, Claude, Gemini, 通义千问等
- **AI功能**: 笔记分析、内容生成、智能编辑、问答对话

## 系统架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端 (Vue3)    │    │   后端 (Spring)  │    │   数据库 (MySQL) │
│                 │    │                 │    │                 │
│ - 用户界面       │◄──►│ - RESTful API   │◄──►│ - 用户数据       │
│ - 笔记编辑器     │    │ - 业务逻辑       │    │ - 笔记内容       │
│ - 文件上传       │    │ - 权限控制       │    │ - 关系数据       │
│ - AI交互界面     │    │ - AI服务集成     │    │ - 日志记录       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                              │
                              ▼
                       ┌─────────────────┐
                       │   缓存 (Redis)   │
                       │                 │
                       │ - 会话存储       │
                       │ - 热点数据       │
                       │ - AI对话缓存     │
                       └─────────────────┘
```

## 核心功能模块

### 1. 用户管理模块
- **用户注册/登录**: 邮箱验证、JWT认证、第三方登录验证（邮箱 or github）
- **个人资料管理**: 头像、昵称、简介
- **AI配置管理**: API Key管理、模型选择
- **权限控制**: 基于角色的访问控制

### 2. 好友社交模块
- **好友关系**: 添加好友、好友申请、好友列表
- **权限分级**: 公开、好友可见、私有
- **社交互动**: 星标、评论、分享

### 3. 笔记管理模块
- **笔记CRUD**: 创建、编辑、删除、查看
- **笔记权限**：可个人开发笔记，也可开放给其他用户编辑
- **分类管理**: 自定义分类、标签系统
- **文件上传**: Markdown文件、图片、附件（可选的外部mgtree文件）
- **版本控制**: 笔记历史版本管理
- **搜索功能**: 全文搜索、标签搜索

### 4. 笔记查看模块

- **笔记分类显示**：显示笔记分类，笔记标签
- **可视化展示**: markdown渲染，prism高亮渲染，Mermaid渲染
- **自定义树状图组件**: 自定义树状图组件的md语法支持，跳转节点的代码导航支持
- **导出功能**: 支持笔记和树状图png导出

- **题目编辑弹出层**：根据当前笔记内容，选中内容编辑问题。并添加到用户的题库列表（题目对应唯一的笔记位置）

- **首页信息展示**：实现平台推荐算法，推荐最热门的笔记，以及显示好友的笔记动态
- **首页搜索**：根据作者、标签、笔记标题模糊查找所有已公开笔记

### 5. 个人信息模块
- **好友列表**: 查看好友列表
- **系统通知**: 接受系统邮件通知，好友申请通知
- **个人简介**: 使用markdown的个人简介功能
- **笔记列表**: 个人简介显示置顶笔记，以及更多笔记列表的跳转查看
- **题目查看**：查看题库列表，题目作答页面的弹出

### 6. 题库模块
- **题库编辑**: 支持题库的批量更新和删除，用户题库搜索。
- **题库导航**: 可导航到之前创造这个题库的笔记页面
- **支持多种答案**：除了用户选择的笔记内容作为答案，可在题库模块编辑其他备选答案。
- **AI解析**: 基于用户AI解析当前题目，生成答案文档
- **题目作答**: 答题页面，显示题目难度，标签，作答进度，题目左右翻页
- **答题结果**: 给出正确数量、作答时间的结果页面，并给出 正确答案 和 答案解析（可选）
- **历史查询**: 查询历史的答题结果，

### 7. AI集成模块

- **智能问答**: 基于笔记内容的AI问答
- **内容生成**: AI辅助生成笔记内容
- **智能编辑**: AI自动优化笔记结构
- **上下文理解**: AI理解笔记和树状图内容

### 8. 后台管理模块

- **数据库表管理**: 可视化管理数据库表
- **平台流量统计**: 对平台的访问记录等进行统计，生成仪表盘
- **内容审核**: 审核用户笔记内容，接受举报的审核
- **系统通知**: 消息通知的发放，发送到用户邮箱
