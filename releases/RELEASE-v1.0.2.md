# MGTree Editor v1.0.2 🚀

[![release](https://img.shields.io/badge/release-v1.0.2-orange)](https://github.com/hhyufan/miaogu-ide) [![date](https://img.shields.io/badge/date-2025--01--26-blue)](https://github.com/hhyufan/miaogu-ide)

## 🎯 用户体验优化版本

本版本专注于提升编辑效率和修复关键用户体验问题，引入了快捷键操作并解决了多个影响使用的bug。

## ✨ 新增功能

### ⌨️ **快捷键操作**

- **Tab键添加子节点**：选中节点后按Tab键快速添加子节点，提升编辑效率
- **Del键删除节点**：选中节点后按Del键快速删除当前节点，简化删除操作
- **键盘导航优化**：完善键盘操作体验，支持纯键盘编辑工作流
- **焦点管理**：优化Tab键焦点切换，确保快捷键功能正常工作

### 🎨 **界面交互优化**

- **按钮悬停显示**：节点操作按钮（添加/删除）仅在鼠标悬停时显示，界面更简洁
- **焦点禁用**：为所有UI组件添加`tabIndex={-1}`，禁用默认Tab键焦点切换
- **视觉反馈**：保持悬停时的视觉增强效果，提供清晰的交互反馈

## 🐛 Bug修复

### 📝 **编辑体验修复**

- **光标位置修复**：解决输入后光标意外重置到尾部的问题
  - 修复了编辑节点时光标跳转的bug
  - 确保光标保持在正确的编辑位置
  - 提升文本编辑的连续性和流畅度

### 🌳 **树形结构修复**

- **折叠状态管理**：修复折叠父节点后子节点折叠状态的bug
  - 折叠父节点时自动清除所有子节点的展开状态
  - 重新展开父节点时，所有子节点恢复为折叠状态
  - 确保树形结构状态的一致性和可预测性

### 🎯 **焦点管理修复**

- **Tab键行为统一**：确保Tab键专用于添加子节点功能
  - 禁用了所有组件的默认Tab键焦点切换
  - 统一了键盘操作的行为逻辑
  - 避免了焦点切换与功能快捷键的冲突

## 🔧 技术改进

### ⌨️ **键盘事件处理**

- **快捷键系统**：在TreeEditor组件中新增键盘事件监听
- **事件委托**：优化键盘事件的处理机制，确保快捷键响应的准确性
- **冲突避免**：防止快捷键与浏览器默认行为冲突

### 🎨 **样式系统优化**

- **CSS动态控制**：通过修改`.node-actions`的opacity实现按钮显示控制
- **过渡动画**：保持0.05s的平滑过渡效果
- **响应式交互**：确保悬停效果的即时响应

### 🌳 **状态管理增强**

- **展开状态算法**：新增`handleExpand`函数，智能处理节点展开/折叠逻辑
- **递归状态清理**：实现子节点状态的递归清理机制
- **状态一致性**：确保UI状态与数据状态的完全同步

## 📋 完整更新列表

### 新增功能
- ✅ Tab键快捷添加子节点
- ✅ Del键快捷删除节点
- ✅ 按钮悬停显示机制
- ✅ 全局焦点管理优化

### Bug修复
- ✅ 修复输入光标重置问题
- ✅ 修复折叠状态管理问题
- ✅ 修复Tab键焦点切换冲突

### 技术优化
- ✅ 键盘事件处理系统
- ✅ CSS样式动态控制
- ✅ 树形状态管理算法

---

**升级建议**：本版本包含重要的用户体验改进和bug修复，建议所有用户升级到v1.0.2以获得更好的编辑体验。