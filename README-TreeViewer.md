# TreeViewer 组件使用说明

## 概述

TreeViewer 是一个现代化的树状图组件，用于在 Markdown 文档中展示知识点脉络和层次结构。它支持展开/折叠、现代化的视觉效果，以及响应式设计。

## 功能特性

- 🌳 **现代化树状图**: 类似 XMind 的纵向逻辑图风格
- 📁 **展开/折叠**: 支持节点的展开和折叠操作
- 🎨 **美观界面**: 现代化的 UI 设计，支持深色/浅色主题
- 💻 **代码高亮**: 自动识别包含代码的节点并特殊标记
- 📱 **响应式设计**: 适配不同屏幕尺寸
- ⚡ **高性能**: 优化的渲染性能，支持大型树结构

## 使用方法

### 1. 直接引用（推荐）

直接在Markdown中使用`@tree()`语法，无需代码块包装：

```markdown
@tree(变量和数据类型)
```

支持路径：
```markdown
@tree(./trees/变量和数据类型)
```

### 2. 代码块内容渲染

`tree`代码块只能用于直接渲染树状内容，不支持外部文件引用：

## 树状文件格式

树状文件使用 `.mgtree` 扩展名，支持以下语法：

### 基本语法
```
变量
	作用：`变量`是用来`保存数据`的
	定义
		声明：int age;
		赋值：age = 22;
数据类型
	基本类型：简单类型
	引用类型：复杂类型
```

### 跳转语法
```
常量：值无法改变，格式要求：字母`全大写`，不同单词使用`下划线(_)`分割 >java[6]
```

- 使用 `>java[index]` 语法可以跳转到页面中的第 index 个代码块
- 支持任意语言标识符，如 `>python[0]`、`>javascript[2]` 等

**注意**：`tree`代码块不支持`@tree()`语法或外部文件引用，仅用于内容渲染。

### 3. 代码块引用外部文件

在tree代码块中使用`@tree()`语法引用外部的`.mgtree`文件：

```markdown
```tree
@tree(变量和数据类型)
```
```

**支持路径：**
```markdown
```tree
@tree(./trees/变量和数据类型)
```
```

```markdown
```tree
变量
	作用：`变量`是用来`保存数据`的，`数据`保存在`内存中`
	定义
		声明：int age;
		赋值：age = 22;
		同时声明和赋值：int age = 22;
数据类型
	基本类型：简单类型
	引用类型：复杂类型
```

```

## 树状文件格式

树状文件（.mgtree）使用缩进来表示层级关系：

```

根节点
	一级子节点
		二级子节点
			三级子节点
	另一个一级子节点
		包含 `代码`的节点

```

### 格式规则

1. **缩进**: 使用 Tab 或空格表示层级（建议使用 Tab）
2. **代码标记**: 使用反引号 \`code\` 标记代码内容
3. **特殊字符**: 支持中文、英文、数字、符号等
4. **空行**: 空行会被忽略

## 视觉效果

- **文件夹图标**: 有子节点的节点显示文件夹图标
- **文件图标**: 叶子节点显示文件图标
- **代码标识**: 包含代码的节点会有特殊的渐变色文字和💻图标
- **悬停效果**: 鼠标悬停时的高亮效果
- **展开/折叠动画**: 平滑的展开折叠动画

## 操作功能

- **全部展开**: 点击"全部展开"按钮展开所有节点
- **全部折叠**: 点击"全部折叠"按钮折叠所有节点
- **单节点操作**: 点击节点前的箭头图标展开/折叠单个节点
- **默认展开**: 默认展开前两级节点

## 主题支持

组件自动适配系统的深色/浅色主题：

- **浅色主题**: 白色背景，深色文字
- **深色主题**: 深色背景，浅色文字
- **自动切换**: 跟随系统主题自动切换

## 技术实现

- **React**: 基于 React 18+ 开发
- **Ant Design**: 使用 Ant Design 的 Tree 组件
- **CSS3**: 现代化的 CSS 样式和动画
- **响应式**: 使用 CSS Media Queries 实现响应式设计

## 文件结构

```

src/components/
├── TreeViewer.js      # 主组件文件
├── TreeViewer.css     # 样式文件
└── MarkdownViewer.js  # 集成到 Markdown 渲染器

```

## 示例效果

当你在 Markdown 中使用 TreeViewer 时，会看到：

1. 一个带有标题"📊 知识点脉络"的卡片
2. 右上角有"全部展开"和"全部折叠"按钮
3. 树状结构以现代化的样式展示
4. 包含代码的节点会有特殊的视觉标识
5. 支持鼠标交互和键盘导航

这个组件让知识点的层次结构更加清晰，提升了学习笔记的可读性和交互性。
```
